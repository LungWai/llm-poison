{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/llm-poison/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient, type CookieOptions } from '@supabase/ssr'\r\nimport { cookies } from 'next/headers'\r\n\r\nexport async function createClient() {\r\n  const cookieStore = await cookies()\r\n\r\n  return createServerClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        get(name: string) {\r\n          return cookieStore.get(name)?.value\r\n        },\r\n        set(name: string, value: string, options: CookieOptions) {\r\n          cookieStore.set(name, value, options)\r\n        },\r\n        remove(name: string, options: CookieOptions) {\r\n          cookieStore.set(name, '', options)\r\n        },\r\n      },\r\n    }\r\n  )\r\n}"],"names":[],"mappings":";;;AAAA;AAAA;AACA;;;AAEO,eAAe;IACpB,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAEhC,OAAO,CAAA,GAAA,yKAAA,CAAA,qBAAkB,AAAD,sUAGtB;QACE,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,YAAY,GAAG,CAAC,OAAO;YAChC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAsB;gBACrD,YAAY,GAAG,CAAC,MAAM,OAAO;YAC/B;YACA,QAAO,IAAY,EAAE,OAAsB;gBACzC,YAAY,GAAG,CAAC,MAAM,IAAI;YAC5B;QACF;IACF;AAEJ","debugId":null}},
    {"offset": {"line": 117, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/llm-poison/app/vote/actions.ts"],"sourcesContent":["'use server'\r\n\r\nimport { createClient } from '@/lib/supabase/server'\r\nimport { revalidatePath } from 'next/cache'\r\n\r\nexport async function handleVote(entryId: string) {\r\n  const supabase = await createClient()\r\n  const {\r\n    data: { user },\r\n  } = await supabase.auth.getUser()\r\n\r\n  if (!user) {\r\n    throw new Error('User not authenticated')\r\n  }\r\n\r\n  const { error } = await supabase\r\n    .from('votes')\r\n    .insert({ entry_id: entryId, user_id: user.id })\r\n\r\n  // if the user has already voted, delete the vote\r\n  if (error && error.code === '23505') {\r\n    const { error: deleteError } = await supabase\r\n      .from('votes')\r\n      .delete()\r\n      .match({ entry_id: entryId, user_id: user.id })\r\n    \r\n    if (deleteError) {\r\n      console.error('Error deleting vote:', deleteError)\r\n      throw deleteError\r\n    }\r\n    \r\n    revalidatePath('/')\r\n    return { success: true, action: 'removed' as const }\r\n  } else if (error) {\r\n    console.error('Error inserting vote:', error)\r\n    throw error\r\n  }\r\n\r\n  revalidatePath('/')\r\n  return { success: true, action: 'added' as const }\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;;;;;;AAEO,eAAe,WAAW,OAAe;IAC9C,MAAM,WAAW,MAAM,CAAA,GAAA,yHAAA,CAAA,eAAY,AAAD;IAClC,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,IAAI,CAAC,MAAM;QACT,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,SACL,MAAM,CAAC;QAAE,UAAU;QAAS,SAAS,KAAK,EAAE;IAAC;IAEhD,iDAAiD;IACjD,IAAI,SAAS,MAAM,IAAI,KAAK,SAAS;QACnC,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAClC,IAAI,CAAC,SACL,MAAM,GACN,KAAK,CAAC;YAAE,UAAU;YAAS,SAAS,KAAK,EAAE;QAAC;QAE/C,IAAI,aAAa;YACf,QAAQ,KAAK,CAAC,wBAAwB;YACtC,MAAM;QACR;QAEA,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;QACf,OAAO;YAAE,SAAS;YAAM,QAAQ;QAAmB;IACrD,OAAO,IAAI,OAAO;QAChB,QAAQ,KAAK,CAAC,yBAAyB;QACvC,MAAM;IACR;IAEA,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;IACf,OAAO;QAAE,SAAS;QAAM,QAAQ;IAAiB;AACnD;;;IAnCsB;;AAAA,+OAAA","debugId":null}},
    {"offset": {"line": 175, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/llm-poison/.next-internal/server/app/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {handleVote as '408588501a7a50ffedef9cfdf0fe90aa7b44c22594'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA","debugId":null}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/llm-poison/components/VoteButton.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const VoteButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call VoteButton() from the server but VoteButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/VoteButton.tsx <module evaluation>\",\n    \"VoteButton\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,aAAa,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAoO,GACjQ,2DACA","debugId":null}},
    {"offset": {"line": 241, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/llm-poison/components/VoteButton.tsx/proxy.mjs"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const VoteButton = registerClientReference(\n    function() { throw new Error(\"Attempted to call VoteButton() from the server but VoteButton is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/components/VoteButton.tsx\",\n    \"VoteButton\",\n);\n"],"names":[],"mappings":";;;AAAA;;AACO,MAAM,aAAa,CAAA,GAAA,qPAAA,CAAA,0BAAuB,AAAD,EAC5C;IAAa,MAAM,IAAI,MAAM;AAAoO,GACjQ,uCACA","debugId":null}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 273, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/llm-poison/app/page.tsx"],"sourcesContent":["import { createClient } from '@/lib/supabase/server'\nimport { headers } from 'next/headers'\nimport { notFound } from 'next/navigation'\nimport { VoteButton } from '@/components/VoteButton'\nimport DOMPurify from 'isomorphic-dompurify'\n\nexport const revalidate = 0\n\nexport default async function Home() {\n  const supabase = await createClient()\n  const headersList = await headers()\n  const host = headersList.get('host')\n\n  // The root domain is the domain without any subdomains.\n  // On localhost, it's `localhost:3000`. On production, it should be your-site.com.\n  // You should configure this in your Vercel project environment variables.\n  const rootDomain = process.env.NEXT_PUBLIC_ROOT_DOMAIN || 'localhost:3000'\n  const slug = host && host.endsWith(`.${rootDomain}`) ? host.replace(`.${rootDomain}`, '') : null\n\n  // If there's a slug, we're on a subdomain page.\n  if (slug) {\n    const { data: entry, error } = await supabase\n      .from('entries')\n      .select('title, content')\n      .eq('slug', slug)\n      .eq('status', 'published')\n      .single()\n\n    if (error || !entry) {\n      notFound()\n    }\n\n    // Sanitize the HTML on the server before rendering.\n    const sanitizedContent = DOMPurify.sanitize(entry.content)\n\n    return (\n      <main className=\"p-8\">\n        <h1 className=\"text-4xl font-bold mb-4\">{entry.title}</h1>\n        <div\n          className=\"prose dark:prose-invert\"\n          dangerouslySetInnerHTML={{ __html: sanitizedContent }}\n        />\n      </main>\n    )\n  }\n\n  // Otherwise, we're on the main grid page.\n  const { data: entriesData, error } = await supabase\n    .from('entries')\n    .select('*')\n    .eq('status', 'published')\n\n  if (error) {\n    console.error('Error fetching entries:', error)\n    return <div>Error loading entries.</div>\n  }\n\n  const entries = await Promise.all(\n    (entriesData || []).map(async (entry) => {\n      const { data: voteCount, error: voteError } = await supabase.rpc(\n        'get_vote_count',\n        { entry_id_param: entry.id }\n      )\n\n      if (voteError) {\n        console.error(`Error fetching vote count for entry ${entry.id}:`, voteError)\n      }\n      return {\n        ...entry,\n        voteCount: voteCount || 0,\n      }\n    })\n  )\n\n  return (\n    <main className=\"flex min-h-screen flex-col items-center justify-between p-24\">\n      <div className=\"z-10 w-full max-w-5xl items-center justify-between font-mono text-sm lg:flex\">\n        <p className=\"fixed left-0 top-0 flex w-full justify-center border-b border-gray-300 bg-gradient-to-b from-zinc-200 pb-6 pt-8 backdrop-blur-2xl dark:border-neutral-800 dark:bg-zinc-800/30 dark:from-inherit lg:static lg:w-auto  lg:rounded-xl lg:border lg:bg-gray-200 lg:p-4 lg:dark:bg-zinc-800/30\">\n          Published Entries\n        </p>\n      </div>\n\n      <div className=\"mt-12 grid gap-8 md:grid-cols-2 lg:grid-cols-3\">\n        {entries?.map((entry) => (\n          <div key={entry.id} className=\"rounded-lg border border-gray-300 bg-white p-4 shadow-md dark:border-neutral-700 dark:bg-neutral-800/30\">\n            <div className=\"flex justify-between items-start\">\n              <a href={`http://${entry.slug}.${rootDomain}`} target=\"_blank\" rel=\"noopener noreferrer\">\n                  <h2 className=\"mb-2 text-xl font-bold hover:underline\">{entry.title}</h2>\n              </a>\n              <VoteButton entryId={entry.id} voteCount={entry.voteCount} />\n            </div>\n            <div className=\"aspect-video w-full overflow-hidden rounded-md border\">\n              <iframe\n                sandbox=\"allow-scripts\"\n                srcDoc={entry.content}\n                className=\"h-full w-full\"\n              />\n            </div>\n          </div>\n        ))}\n      </div>\n    </main>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAAA;AACA;AACA;;;;;;;AAEO,MAAM,aAAa;AAEX,eAAe;IAC5B,MAAM,WAAW,MAAM,CAAA,GAAA,yHAAA,CAAA,eAAY,AAAD;IAClC,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAChC,MAAM,OAAO,YAAY,GAAG,CAAC;IAE7B,wDAAwD;IACxD,kFAAkF;IAClF,0EAA0E;IAC1E,MAAM,aAAa,sDAAuC;IAC1D,MAAM,OAAO,QAAQ,KAAK,QAAQ,CAAC,CAAC,CAAC,EAAE,YAAY,IAAI,KAAK,OAAO,CAAC,CAAC,CAAC,EAAE,YAAY,EAAE,MAAM;IAE5F,gDAAgD;IAChD,IAAI,MAAM;QACR,MAAM,EAAE,MAAM,KAAK,EAAE,KAAK,EAAE,GAAG,MAAM,SAClC,IAAI,CAAC,WACL,MAAM,CAAC,kBACP,EAAE,CAAC,QAAQ,MACX,EAAE,CAAC,UAAU,aACb,MAAM;QAET,IAAI,SAAS,CAAC,OAAO;YACnB,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD;QACT;QAEA,oDAAoD;QACpD,MAAM,mBAAmB,gJAAA,CAAA,UAAS,CAAC,QAAQ,CAAC,MAAM,OAAO;QAEzD,qBACE,8OAAC;YAAK,WAAU;;8BACd,8OAAC;oBAAG,WAAU;8BAA2B,MAAM,KAAK;;;;;;8BACpD,8OAAC;oBACC,WAAU;oBACV,yBAAyB;wBAAE,QAAQ;oBAAiB;;;;;;;;;;;;IAI5D;IAEA,0CAA0C;IAC1C,MAAM,EAAE,MAAM,WAAW,EAAE,KAAK,EAAE,GAAG,MAAM,SACxC,IAAI,CAAC,WACL,MAAM,CAAC,KACP,EAAE,CAAC,UAAU;IAEhB,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,2BAA2B;QACzC,qBAAO,8OAAC;sBAAI;;;;;;IACd;IAEA,MAAM,UAAU,MAAM,QAAQ,GAAG,CAC/B,CAAC,eAAe,EAAE,EAAE,GAAG,CAAC,OAAO;QAC7B,MAAM,EAAE,MAAM,SAAS,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,SAAS,GAAG,CAC9D,kBACA;YAAE,gBAAgB,MAAM,EAAE;QAAC;QAG7B,IAAI,WAAW;YACb,QAAQ,KAAK,CAAC,CAAC,oCAAoC,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,EAAE;QACpE;QACA,OAAO;YACL,GAAG,KAAK;YACR,WAAW,aAAa;QAC1B;IACF;IAGF,qBACE,8OAAC;QAAK,WAAU;;0BACd,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;8BAA4R;;;;;;;;;;;0BAK3S,8OAAC;gBAAI,WAAU;0BACZ,SAAS,IAAI,CAAC,sBACb,8OAAC;wBAAmB,WAAU;;0CAC5B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,MAAM,CAAC,OAAO,EAAE,MAAM,IAAI,CAAC,CAAC,EAAE,YAAY;wCAAE,QAAO;wCAAS,KAAI;kDAC/D,cAAA,8OAAC;4CAAG,WAAU;sDAA0C,MAAM,KAAK;;;;;;;;;;;kDAEvE,8OAAC,yHAAA,CAAA,aAAU;wCAAC,SAAS,MAAM,EAAE;wCAAE,WAAW,MAAM,SAAS;;;;;;;;;;;;0CAE3D,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCACC,SAAQ;oCACR,QAAQ,MAAM,OAAO;oCACrB,WAAU;;;;;;;;;;;;uBAXN,MAAM,EAAE;;;;;;;;;;;;;;;;AAmB5B","debugId":null}}]
}